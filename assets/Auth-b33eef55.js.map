{"version":3,"file":"Auth-b33eef55.js","sources":["../../src/pages/Auth.tsx"],"sourcesContent":["import { createStore } from 'solid-js/store'\nimport { NavLink } from '../components/NavLink'\nimport { ListErrors, IErrors } from '../components/ListErrors'\nimport { useStore } from '../store/storeContext'\nimport { useRouter } from '../routeContext'\nimport { INewUser } from '../api/RealWorldApi'\n\ninterface IAuthStore extends INewUser {\n  errors: IErrors\n  inProgress: boolean\n}\n\nexport default () => {\n  const [state, setState] = createStore<IAuthStore>({ username: '', inProgress: false })\n  const [, { register, login }] = useStore()\n  const { setLocation } = useRouter()\n  const isLogin = location.hash.includes('login')\n  const text = isLogin ? 'Sign in' : 'Sign up'\n  const link = isLogin ? <NavLink route=\"register\">Need an account?</NavLink> : <NavLink route=\"login\">Have an account?</NavLink>\n\n  const handleSubmit = (e: InputEvent) => {\n    e.preventDefault()\n    setState({ inProgress: true })\n    const p = isLogin ? login(state.email, state.password) : register(state.username, state.email, state.password)\n    p.then(() => (setLocation('')))\n      .catch((errors: IErrors) => setState({ errors }))\n      .finally(() => setState({ inProgress: false }))\n  }\n\n  return (\n    <div class=\"auth-page\">\n      <div class=\"container page\">\n        <div class=\"row\">\n          <div class=\"col-md-6 offset-md-3 col-xs-12\">\n            <h1 class=\"text-xs-center\" textContent={text} />\n            <p class=\"text-xs-center\">{link}</p>\n            <ListErrors errors={state.errors} />\n            <form onSubmit={handleSubmit}>\n              {!isLogin && (\n                <fieldset class=\"form-group\">\n                  <input\n                    class=\"form-control form-control-lg\"\n                    type=\"text\"\n                    aria-label=\"username\"\n                    placeholder=\"Username\"\n                    value={state.username || ''}\n                    onChange={e => setState({ username: e.target.value })}\n                  />\n                </fieldset>\n              )}\n              <fieldset class=\"form-group\">\n                <input\n                  class=\"form-control form-control-lg\"\n                  type=\"text\"\n                  aria-label=\"email\"\n                  placeholder=\"Email\"\n                  value={state.email || ''}\n                  onChange={e => setState({ email: e.target.value })}\n                />\n              </fieldset>\n              <fieldset class=\"form-group\">\n                <input\n                  class=\"form-control form-control-lg\"\n                  type=\"password\"\n                  aria-label=\"password\"\n                  placeholder=\"Password\"\n                  value={state.password || ''}\n                  onChange={e => setState({ password: e.target.value })}\n                />\n              </fieldset>\n              <button class=\"btn btn-lg btn-primary pull-xs-right\" type=\"submit\" disabled={state.inProgress} textContent={text} />\n            </form>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n"],"names":["Auth","state","setState","createStore","username","inProgress","register","login","useStore","setLocation","useRouter","isLogin","location","hash","includes","text","link","_$createComponent","NavLink","route","children","handleSubmit","e","preventDefault","email","password","then","catch","errors","finally","_el$","_tmpl$","_el$2","firstChild","_el$3","_el$4","_el$5","_el$6","nextSibling","_el$7","_el$8","_el$9","_el$10","_el$11","_el$12","textContent","_$insert","ListErrors","addEventListener","_el$13","_tmpl$2","_el$14","target","value","_$effect","disabled"],"mappings":"+0BAYAA,EAAe,IAAM,CACnB,KAAM,CAACC,EAAOC,CAAQ,EAAIC,EAAwB,CAAEC,SAAU,GAAIC,WAAY,EAAM,CAAC,EAC/E,CAAG,CAAA,CAAEC,SAAAA,EAAUC,MAAAA,CAAM,CAAC,EAAIC,EAAQ,EAClC,CAAEC,YAAAA,CAAa,EAAGC,EAAS,EAC3BC,EAAUC,SAASC,KAAKC,SAAS,OAAO,EACxCC,EAAOJ,EAAU,UAAY,UAC7BK,EAAOL,EAAOM,EAAIC,EAAO,CAACC,MAAK,WAAAC,SAAA,mBAAAH,EAAAA,EAA0CC,EAAO,CAACC,MAAK,QAAAC,SAAA,mBAAmC,EAEzHC,EAAgBC,GAAkB,CACtCA,EAAEC,eAAc,EAChBrB,EAAS,CAAEG,WAAY,EAAK,CAAC,GACnBM,EAAUJ,EAAMN,EAAMuB,MAAOvB,EAAMwB,QAAQ,EAAInB,EAASL,EAAMG,SAAUH,EAAMuB,MAAOvB,EAAMwB,QAAQ,GAC3GC,KAAK,IAAOjB,EAAY,EAAE,CAAE,EAC3BkB,MAAOC,GAAoB1B,EAAS,CAAE0B,OAAAA,CAAO,CAAC,CAAC,EAC/CC,QAAQ,IAAM3B,EAAS,CAAEG,WAAY,EAAO,CAAA,CAAC,GAGlD,OAAA,IAAA,CAAA,MAAAyB,EAAAC,EAAA,EAAAC,EAAAF,EAAAG,WAAAC,EAAAF,EAAAC,WAAAE,EAAAD,EAAAD,WAAAG,EAAAD,EAAAF,WAAAI,EAAAD,EAAAE,YAAAC,EAAAF,EAAAC,YAAAE,EAAAD,EAAAN,WAAAQ,EAAAD,EAAAP,WAAAS,EAAAF,EAAAF,YAAAK,EAAAD,EAAAT,WAAAW,EAAAF,EAAAJ,YAAAF,OAAAA,EAAAS,YAKkD9B,EAAI+B,EAAAT,EACjBrB,CAAI,EAAA8B,EAAAX,EAAAlB,EAC9B8B,EAAU,CAAA,IAACnB,QAAM,CAAA,OAAE3B,EAAM2B,MAAM,CAAA,CAAA,EAAAW,CAAA,EAAAA,EAAAS,iBAAA,SAChB3B,CAAY,EAAAyB,EAAAP,EACzB,CAAC5B,IAAO,IAAA,CAAA,MAAAsC,EAAAC,EAAA,EAAAC,EAAAF,EAAAhB,WAAAkB,OAAAA,EAAAH,iBAAA,SAQO1B,GAAKpB,EAAS,CAAEE,SAAUkB,EAAE8B,OAAOC,KAAO,CAAA,CAAC,EAAAC,EAAA,IAAAH,EAAAE,MAD9CpD,EAAMG,UAAY,EAAE,EAAA6C,CAAA,GAIhC,EAAAT,CAAA,EAAAC,EAAAO,iBAAA,SAQa1B,GAAKpB,EAAS,CAAEsB,MAAOF,EAAE8B,OAAOC,KAAO,CAAA,CAAC,EAAAV,EAAAK,iBAAA,SAUxC1B,GAAKpB,EAAS,CAAEuB,SAAUH,EAAE8B,OAAOC,KAAO,CAAA,CAAC,EAAAT,EAAAC,YAGmD9B,EAAIuC,MAAAV,EAAAW,SAAnCtD,EAAMI,UAAU,EAAAiD,EAAA,IAAAb,EAAAY,MAdlFpD,EAAMuB,OAAS,EAAE,EAAA8B,EAAA,IAAAX,EAAAU,MAUjBpD,EAAMwB,UAAY,EAAE,EAAAK,CAAA,IAW7C"}