import{u as q,c as z,l as d,j as B,i as _,a as w,b as $,F as G,d as f,t as A,e as H}from"./index-24d74da4.js";import{L as J}from"./ListErrors-9b16aafa.js";const M=A(`<div class="editor-page"><div class="container page"><div class="row"><div class="col-md-10 offset-md-1 col-xs-12"><form><fieldset><fieldset class="form-group"><input type="text" class="form-control form-control-lg" placeholder="Article Title"></fieldset><fieldset class="form-group"><input type="text" class="form-control" placeholder="What's this article about?"></fieldset><fieldset class="form-group"><textarea class="form-control" rows="8" placeholder="Write your article (in markdown)"></textarea></fieldset><fieldset class="form-group"><input type="text" class="form-control" placeholder="Enter tags"><div class="tag-list"></div></fieldset><button class="btn btn-lg pull-xs-right btn-primary" type="button">Publish Article`),N=A('<span class="tag-default tag-pill"><i class="ion-close-round">'),U=({slug:i})=>{const[m,{createArticle:D,updateArticle:T}]=q(),[t,l]=z({tagInput:"",tagList:[]});d.info("***** Editor[slug=%s] **********",i),d.info("Article (slug=%s) inStore=%s",i,i in m.articles);const u=e=>r=>{l(e,r.target.value)},b=()=>{t.tagInput&&l(e=>{e.tagList.push(e.tagInput.trim()),e.tagInput=""})},F=e=>{!t.inProgress&&l("tagList",r=>r.filter(g=>g!==e))},R=e=>{switch(e.keyCode){case 13:case 9:case 188:e.keyCode!==9&&e.preventDefault(),b();break}},W=async e=>{e.preventDefault(),l({inProgress:!0});try{const{inProgress:r,tagsInput:g,...a}=t;i?await T(a):await D(a),location.hash=`/article/${a.slug}`}catch(r){l(r)}finally{l({inProgress:!1})}};return B(()=>{if(d.info("createComputed (slug=%s)",i),i){const e=m.articles[i];e?(d.info("editing article (slug=%s)",i),l(e)):d.info("Article not in store (slug=%s)",i)}}),(()=>{const e=M(),r=e.firstChild,g=r.firstChild,a=g.firstChild,y=a.firstChild,j=y.firstChild,C=j.firstChild,p=C.firstChild,x=C.nextSibling,v=x.firstChild,k=x.nextSibling,h=k.firstChild,P=k.nextSibling,n=P.firstChild,K=n.nextSibling,S=P.nextSibling;return _(a,w(J,{get errors(){return t.errors}}),y),$(p,"change",u("title")),$(v,"change",u("description")),$(h,"change",u("body")),n.$$keyup=R,n.addEventListener("blur",b),$(n,"change",u("tagInput")),_(K,w(G,{get each(){return t.tagList},children:s=>(()=>{const o=N(),c=o.firstChild;return c.$$click=F,c.$$clickData=s,_(o,s,null),o})()})),S.$$click=W,f(s=>{const o=t.inProgress,c=t.inProgress,E=t.inProgress,I=t.inProgress,L=t.inProgress;return o!==s._v$&&(p.disabled=s._v$=o),c!==s._v$2&&(v.disabled=s._v$2=c),E!==s._v$3&&(h.disabled=s._v$3=E),I!==s._v$4&&(n.disabled=s._v$4=I),L!==s._v$5&&(S.disabled=s._v$5=L),s},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0,_v$5:void 0}),f(()=>p.value=t.title||""),f(()=>v.value=t.description||""),f(()=>h.value=t.body||""),f(()=>n.value=t.tagInput),e})()};H(["keyup","click"]);export{U as default};
//# sourceMappingURL=Editor-8ef35601.js.map
