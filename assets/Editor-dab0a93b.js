import{g as q,p as z,i as m,m as w,y as p,F as B,j as d,t as A,h as G}from"./vendor-26062862.js";import{u as H,l as f}from"./index-004e05de.js";import{L as J}from"./ListErrors-0bcc1fdc.js";const M=A(`<div class="editor-page"><div class="container page"><div class="row"><div class="col-md-10 offset-md-1 col-xs-12"><form><fieldset><fieldset class="form-group"><input type="text" class="form-control form-control-lg" placeholder="Article Title"></fieldset><fieldset class="form-group"><input type="text" class="form-control" placeholder="What's this article about?"></fieldset><fieldset class="form-group"><textarea class="form-control" rows="8" placeholder="Write your article (in markdown)"></textarea></fieldset><fieldset class="form-group"><input type="text" class="form-control" placeholder="Enter tags"><div class="tag-list"></div></fieldset><button class="btn btn-lg pull-xs-right btn-primary" type="button">Publish Article`),N=A('<span class="tag-default tag-pill"><i class="ion-close-round">'),V=({slug:i})=>{const[_,{createArticle:D,updateArticle:T}]=H(),[t,l]=q({tagInput:"",tagList:[]});f.info("***** Editor[slug=%s] **********",i),f.info("Article (slug=%s) inStore=%s",i,i in _.articles);const u=e=>r=>{l(e,r.target.value)},b=()=>{t.tagInput&&l(e=>{e.tagList.push(e.tagInput.trim()),e.tagInput=""})},F=e=>{!t.inProgress&&l("tagList",r=>r.filter(g=>g!==e))},R=e=>{switch(e.keyCode){case 13:case 9:case 188:e.keyCode!==9&&e.preventDefault(),b();break}},W=async e=>{e.preventDefault(),l({inProgress:!0});try{const{inProgress:r,tagsInput:g,...a}=t;i?await T(a):await D(a),location.hash=`/article/${a.slug}`}catch(r){l(r)}finally{l({inProgress:!1})}};return z(()=>{if(f.info("createComputed (slug=%s)",i),i){const e=_.articles[i];e?(f.info("editing article (slug=%s)",i),l(e)):f.info("Article not in store (slug=%s)",i)}}),(()=>{const e=M(),r=e.firstChild,g=r.firstChild,a=g.firstChild,y=a.firstChild,j=y.firstChild,C=j.firstChild,$=C.firstChild,x=C.nextSibling,v=x.firstChild,k=x.nextSibling,h=k.firstChild,P=k.nextSibling,n=P.firstChild,K=n.nextSibling,S=P.nextSibling;return m(a,w(J,{get errors(){return t.errors}}),y),p($,"change",u("title")),p(v,"change",u("description")),p(h,"change",u("body")),n.$$keyup=R,n.addEventListener("blur",b),p(n,"change",u("tagInput")),m(K,w(B,{get each(){return t.tagList},children:s=>(()=>{const o=N(),c=o.firstChild;return c.$$click=F,c.$$clickData=s,m(o,s,null),o})()})),S.$$click=W,d(s=>{const o=t.inProgress,c=t.inProgress,E=t.inProgress,I=t.inProgress,L=t.inProgress;return o!==s._v$&&($.disabled=s._v$=o),c!==s._v$2&&(v.disabled=s._v$2=c),E!==s._v$3&&(h.disabled=s._v$3=E),I!==s._v$4&&(n.disabled=s._v$4=I),L!==s._v$5&&(S.disabled=s._v$5=L),s},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0,_v$5:void 0}),d(()=>$.value=t.title||""),d(()=>v.value=t.description||""),d(()=>h.value=t.body||""),d(()=>n.value=t.tagInput),e})()};G(["keyup","click"]);export{V as default};
//# sourceMappingURL=Editor-dab0a93b.js.map
