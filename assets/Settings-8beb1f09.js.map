{"version":3,"file":"Settings-8beb1f09.js","sources":["../../src/pages/Settings.tsx"],"sourcesContent":["import { ListErrors, IErrors } from '../components/ListErrors'\nimport { createStore } from 'solid-js/store'\nimport { useStore } from '../store/storeContext'\nimport { IUser } from '../api/RealWorldApi'\n\ninterface IUserState extends IUser {\n  password: string\n  errors: IErrors\n  updatingUser: boolean\n}\n\nexport default () => {\n  const [store, { logout, updateUser }] = useStore()\n  const [state, setState] = createStore<IUserState>({\n    image: store.currentUser.image || '',\n    username: store.currentUser.username,\n    bio: store.currentUser.bio || '',\n    email: store.currentUser.email,\n    password: ''\n  })\n\n  const updateState = field => (ev: InputEvent) => setState(field, ev.target.value)\n\n  const submitForm = (ev: InputEvent) => {\n    ev.preventDefault()\n    const user = Object.assign({}, state)\n    if (!user.password) delete user.password\n    if (!user.image) delete user.image\n    setState({ updatingUser: true })\n    updateUser(user)\n      .then(() => (location.hash = `/@${user.username}`))\n      .catch((errors: IErrors) => setState({ errors }))\n      .finally(() => setState({ updatingUser: false }))\n  }\n\n  return (\n    <div class=\"settings-page\">\n      <div class=\"container page\">\n        <div class=\"row\">\n          <div class=\"col-md-6 offset-md-3 col-xs-12\">\n            <h1 class=\"text-xs-center\">Your Settings</h1>\n            <ListErrors errors={state.errors} />\n            <form onSubmit={submitForm}>\n              <fieldset>\n                <fieldset class=\"form-group\">\n                  <input\n                    class=\"form-control\"\n                    type=\"text\"\n                    placeholder=\"URL of profile picture\"\n                    value={state.image || ''}\n                    onChange={updateState('image')}\n                    disabled={state.updatingUser}\n                  />\n                </fieldset>\n                <fieldset class=\"form-group\">\n                  <input\n                    class=\"form-control form-control-lg\"\n                    type=\"text\"\n                    placeholder=\"Your Name\"\n                    value={state.username || ''}\n                    onChange={updateState('username')}\n                    disabled={state.updatingUser}\n                  />\n                </fieldset>\n                <fieldset class=\"form-group\">\n                  <textarea\n                    class=\"form-control form-control-lg\"\n                    rows=\"8\"\n                    placeholder=\"Short bio about you\"\n                    value={state.bio || ''}\n                    onChange={updateState('bio')}\n                    disabled={state.updatingUser}\n                  ></textarea>\n                </fieldset>\n                <fieldset class=\"form-group\">\n                  <input\n                    class=\"form-control form-control-lg\"\n                    type=\"text\"\n                    placeholder=\"Email\"\n                    value={state.email || ''}\n                    onChange={updateState('email')}\n                    disabled={state.updatingUser}\n                  />\n                </fieldset>\n                <fieldset class=\"form-group\">\n                  <input\n                    class=\"form-control form-control-lg\"\n                    type=\"password\"\n                    placeholder=\"Password\"\n                    value={state.password || ''}\n                    onChange={updateState('password')}\n                    disabled={state.updatingUser}\n                  />\n                </fieldset>\n                <button class=\"btn btn-lg btn-primary pull-xs-right\" type=\"submit\" disabled={state.updatingUser}>\n                  Update Settings\n                </button>\n              </fieldset>\n            </form>\n            <hr />\n            <button class=\"btn btn-outline-danger\" onClick={() => (logout(), (location.hash = '/'))}>\n              Or click here to logout.\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n"],"names":["Settings","store","logout","updateUser","useStore","state","setState","createStore","image","currentUser","username","bio","email","password","updateState","field","ev","target","value","submitForm","preventDefault","user","Object","assign","updatingUser","then","location","hash","catch","errors","finally","_el$","_tmpl$","_el$2","firstChild","_el$3","_el$4","_el$5","_el$6","nextSibling","_el$7","_el$8","_el$9","_el$10","_el$11","_el$12","_el$13","_el$14","_el$15","_el$16","_el$17","_el$18","_el$19","_el$20","_$insert","_$createComponent","ListErrors","addEventListener","_$addEventListener","$$click","_$effect","_p$","_v$","_v$2","_v$3","_v$4","_v$5","_v$6","disabled","undefined","_$delegateEvents"],"mappings":"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"}